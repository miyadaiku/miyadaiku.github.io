<!DOCTYPE html>
<html lang="ja">
<head>
  
  
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>
  オブジェクトリファレンス
</title>
  

  <!-- include boolstrap4 -->
  <link rel="stylesheet" href="../../static/bootstrap4/bootstrap.min.css">

  <!-- include jquery.js -->
  <script src="../../static/jquery/jquery.min.js"></script>

  <!-- include tether.js -->
  <script src="../../static/tether/tether.min.js"></script>

  <!-- include boolstrap4 js -->
  <script src="../../static/bootstrap4/bootstrap.min.js"></script>

  <!-- include pygments css -->
  <link rel="stylesheet" href="../../static/pygments/css/pygments.css">
  
  <!-- include font awesome -->
  <link rel="stylesheet" href="../../static/fontawesome/css/font-awesome.min.css">
  
  <meta property="og:url" content="https://miyadaiku.github.io/ja/guide/objects.html" />
<meta property="og:locale" content="ja" />
<meta property="og:type" content="article" />

<meta property="og:title" content="オブジェクトリファレンス - Miyadaiku" />

<meta name="description" content="コンテントオブジェクト Miyadaikuで、contents ディレクトリや files ディレクトリのファイルは、コンテントオブジェクト として読み込まれます。アーティクルやインデックスなどのファイルだけでなく、CSSや画像ファイルなどのMiyadaikuで処理されないファイルも、コンテントオブジェクトとして参照できます。 コンテントオブジェクトは、プロパティ や インデックスのプロパティ に加え、次のメソッドを使用できます。 load(target) target で指定したパスのコンテントオブジェクトを取得します。"/>
<meta property="og:description" content="コンテントオブジェクト Miyadaikuで、contents ディレクトリや files ディレクトリのファイルは、コンテントオブジェクト として読み込まれます。アーティクルやインデックスなどのファイルだけでなく、CSSや画像ファイルなどのMiyadaikuで処理されないファイルも、コンテントオブジェクトとして参照できます。 コンテントオブジェクトは、プロパティ や インデックスのプロパティ に加え、次のメソッドを使用できます。 load(target) target で指定したパスのコンテントオブジェクトを取得します。" />



  <link rel="stylesheet" href="../../static/css/miyadaiku-docs.css">


</head>

<body>
  


<nav class="navbar navbar-toggleable-md navbar-inverse bg-inverse fixed-top">
  <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarsExampleDefault" aria-controls="navbarsExampleDefault" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <a class="navbar-brand" href="../index.html">Miyadaiku</a>

  <div class="collapse navbar-collapse" id="navbarsExampleDefault">
    <ul class="navbar-nav mr-auto">

      <li class="nav-item dropdown">
        
        <a class="nav-link dropdown-toggle" data-toggle="dropdown">チュートリアル</a>
        <div class="dropdown-menu">
          

          
            <a class="dropdown-item" href="../tutorial/tutorial.html">サイトの作成</a>
          
            <a class="dropdown-item" href="../tutorial/tutorial_blog.html">Blogサイトの作成</a>
          
        </div>
      </li>

      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" data-toggle="dropdown">ガイド</a>
        <div class="dropdown-menu">
          

          
            <a class="dropdown-item" href="project.html">Miyadaikuプロジェクト</a>
          
            <a class="dropdown-item" href="property.html">プロパティ</a>
          
            <a class="dropdown-item" href="article.html">アーティクル</a>
          
            <a class="dropdown-item" href="snippet.html">スニペット</a>
          
            <a class="dropdown-item" href="index.html">インデックス</a>
          
            <a class="dropdown-item" href="config.html">コンフィグ</a>
          
            <a class="dropdown-item" href="feed.html">フィード</a>
          
            <a class="dropdown-item" href="template.html">テンプレート</a>
          
            <a class="dropdown-item" href="objects.html">オブジェクトリファレンス</a>
          
            <a class="dropdown-item" href="themes.html">テーマ</a>
          
        </div>
      </li>

      <li class="nav-item">
        <a class="nav-link" href="../samples.html">サンプル</a>
      </li>

      <li class="nav-item">
        <a class="nav-link" href="https://github.com/miyadaiku/miyadaiku"><i class="fa fa-github" aria-hidden="true"></i> GitHub</a>
      </li>

    </ul>
  </div>
</nav>

<div class='container'>
  <div class='row'>
    <div class='col-md-3 toc'>
      
          

          
            
                <div class="article-block">
                  <div class="article-title"><i class="fa fa-file-text-o"></i>            
                  <a href='project.html' >Miyadaikuプロジェクト</a></div>
                </div>
            
          
            
                <div class="article-block">
                  <div class="article-title"><i class="fa fa-file-text-o"></i>            
                  <a href='property.html' >プロパティ</a></div>
                </div>
            
          
            
                <div class="article-block">
                  <div class="article-title"><i class="fa fa-file-text-o"></i>            
                  <a href='article.html' >アーティクル</a></div>
                </div>
            
          
            
                <div class="article-block">
                  <div class="article-title"><i class="fa fa-file-text-o"></i>            
                  <a href='snippet.html' >スニペット</a></div>
                </div>
            
          
            
                <div class="article-block">
                  <div class="article-title"><i class="fa fa-file-text-o"></i>            
                  <a href='index.html' >インデックス</a></div>
                </div>
            
          
            
                <div class="article-block">
                  <div class="article-title"><i class="fa fa-file-text-o"></i>            
                  <a href='config.html' >コンフィグ</a></div>
                </div>
            
          
            
                <div class="article-block">
                  <div class="article-title"><i class="fa fa-file-text-o"></i>            
                  <a href='feed.html' >フィード</a></div>
                </div>
            
          
            
                <div class="article-block">
                  <div class="article-title"><i class="fa fa-file-text-o"></i>            
                  <a href='template.html' >テンプレート</a></div>
                </div>
            
          
            
                <div class="current article-block">
                  <div class="article-title"><i class="fa fa-file-text-o"></i>            
                    <a href='objects.html' >オブジェクトリファレンス</a></div>

                  <ul>
                    
                      <li class="header_h1">
                        <a href="#content_obj">コンテントオブジェクト</a>
                      </li>
                    
                      <li class="header_h1">
                        <a href="#contents_collection">コンテンツコレクション</a>
                      </li>
                    
                  </ul>
                </div>
            
          
            
                <div class="article-block">
                  <div class="article-title"><i class="fa fa-file-text-o"></i>            
                  <a href='themes.html' >テーマ</a></div>
                </div>
            
          
      
    </div>

    <div class='col-md-9 article-body'>
      <a id='page_title' class='header_target'></a>
      <h1>
        オブジェクトリファレンス
      </h1>

      <div class='article-content'>
        <!-- blank -->
<div class="header_target" id="content_obj"></div><div class="section" id="id2">
<h1>コンテントオブジェクト</h1>
<p>Miyadaikuで、<span class="docutils literal">contents</span> ディレクトリや <span class="docutils literal">files</span> ディレクトリのファイルは、<a href="objects.html#content_obj">コンテントオブジェクト</a> として読み込まれます。アーティクルやインデックスなどのファイルだけでなく、CSSや画像ファイルなどのMiyadaikuで処理されないファイルも、コンテントオブジェクトとして参照できます。</p>
<p>コンテントオブジェクトは、<a href="property.html">プロパティ</a> や <a href="index.html#propertyofindex">インデックスのプロパティ</a> に加え、次のメソッドを使用できます。</p>
<dl>
<dt>load(target)</dt>
<dd><p><span class="docutils literal">target</span> で指定したパスのコンテントオブジェクトを取得します。<span class="docutils literal">target</span> には、<span class="docutils literal">'/'</span> から始まる絶対パス、または相対パスを指定できます。絶対パスのルートはプロジェクトの <span class="docutils literal">contents</span> ディレクトリです。</p>
<div class="code-block">
<div class="code-block-caption">Sample of content.load() method</div>
<div class="highlight"><pre><span></span><span class="x">&lt;p&gt;/page1.rst の概要を表示します&lt;/p&gt;</span>

<span class="cp">{{</span> <span class="nv">content.load</span><span class="o">(</span><span class="s1">'/page1.rst'</span><span class="o">)</span><span class="nv">.abstract</span> <span class="cp">}}</span><span class="x"></span>
</pre></div>
</div>
</dd>
<dt>path(fragment=None, abs_path=False, values=None, npage=None):</dt>
<dd><p>現在のページからのパスを取得します。<span class="docutils literal">target</span> には、<span class="docutils literal">'/'</span> から始まる絶対パス、または相対パスを指定できます。絶対パスのルートは、プロジェクトの <span class="docutils literal">contents</span> ディレクトリです。</p>
<p><span class="docutils literal">fragment</span> は、ページ内の要素idを指定します。</p>
<p><span class="docutils literal">abs_path</span> が <span class="docutils literal">True</span> の場合、プロトコルから始まる完全なURLを返します。</p>
<p><span class="docutils literal">values</span> は、グループ別インデックスページの、グループの値を指定します。インデックスページでのみ指定できます。</p>
<p><span class="docutils literal">npage</span> は、インデックスページの、リンク先ページ番号を指定します。インデックスページでのみ指定できます。</p>
<div class="code-block">
<div class="code-block-caption">Sample of content.path() method</div>
<div class="highlight"><pre><span></span><span class="x">&lt;a href='</span><span class="cp">{{</span> <span class="nv">content.path</span><span class="o">()</span> <span class="cp">}}</span><span class="x">'&gt;</span>
<span class="x">   Current content&lt;/a&gt;</span>
</pre></div>
</div>
</dd>
<dt>path_to(target, fragment=None, abs_path=False, values=None, npage=None):</dt>
<dd><p><span class="docutils literal">target</span> で指定するコンテントオブジェクトへのパスを取得します。<span class="docutils literal">target</span> には、<span class="docutils literal">'/'</span> から始まる絶対パス、または相対パスを指定できます。絶対パスのルートは、プロジェクトの <span class="docutils literal">contents</span> ディレクトリです。</p>
<p><span class="docutils literal">fragment</span> は、リンク先ページ内の要素idを指定します。</p>
<p><span class="docutils literal">abs_path</span> が <span class="docutils literal">True</span> の場合、プロトコルから始まる完全なURLを返します。</p>
<p><span class="docutils literal">values</span> は、グループ別インデックスページの、グループの値を指定します。インデックスページでのみ指定できます。</p>
<p><span class="docutils literal">npage</span> は、インデックスページの、リンク先ページ番号を指定します。インデックスページでのみ指定できます。</p>
<div class="code-block">
<div class="code-block-caption">Sample of content.path_to() method</div>
<div class="highlight"><pre><span></span><span class="x">&lt;a href='</span><span class="cp">{{</span> <span class="nv">page.path_to</span><span class="o">(</span><span class="s1">'../page1.rst'</span><span class="o">)</span> <span class="cp">}}</span><span class="x">'&gt;</span>
<span class="x">   親ディレクトリのpage1.html&lt;/a&gt;</span>
</pre></div>
</div>
</dd>
<dt>link(text=None, fragment=None, abs_path=False, attrs=None, values=None, npage=None):</dt>
<dd><p>現在のページからリンクする&lt;a&gt;要素を取得します。</p>
<p><span class="docutils literal">text</span> は、リンク文字列を指定します。省略時は、<span class="docutils literal">fragment</span> で指定するヘッダ要素のテキスト、または``target`` のタイトルとなります。</p>
<p><span class="docutils literal">fragment</span> は、リンク先ページ内の要素idを指定します。</p>
<p><span class="docutils literal">abs_path</span> が <span class="docutils literal">True</span> の場合、プロトコルから始まる完全なURLを返します。</p>
<p><span class="docutils literal">attrs</span> は、&lt;a&gt;要素の属性を辞書で指定します。</p>
<p><span class="docutils literal">values</span> は、グループ別インデックスページの、グループの値を指定します。インデックスページでのみ指定できます。</p>
<p><span class="docutils literal">npage</span> は、インデックスページの、リンク先ページ番号を指定します。インデックスページでのみ指定できます。</p>
<div class="code-block">
<div class="code-block-caption">Sample of content.link() method</div>
<div class="highlight"><pre><span></span><span class="cp">{{</span> <span class="nv">content.link</span><span class="o">(</span><span class="nv">fragment</span><span class="o">=</span><span class="s2">"id_in_page"</span><span class="o">,</span>
                <span class="nv">attrs</span><span class="o">={</span><span class="s2">"class":"class_a"</span><span class="o">,</span> <span class="s2">"style":"border:solid;"</span><span class="o">})</span> <span class="cp">}}</span><span class="x"></span>
</pre></div>
</div>
</dd>
<dt>link_to(target, text=None, fragment=None, abs_path=False, attrs=None, values=None, npage=None):</dt>
<dd><p><span class="docutils literal">target</span> で指定するコンテントオブジェクトへリンクする&lt;a&gt;要素を取得します。<span class="docutils literal">target</span> には、<span class="docutils literal">'/'</span> から始まる絶対パス、または相対パスを指定できます。絶対パスのルートは、プロジェクトの <span class="docutils literal">contents</span> ディレクトリです。</p>
<p><span class="docutils literal">text</span> は、リンク文字列を指定します。省略時は、<span class="docutils literal">fragment</span> で指定するヘッダ要素のテキスト、または``target`` のタイトルとなります。</p>
<p><span class="docutils literal">fragment</span> は、リンク先ページ内の要素idを指定します。</p>
<p><span class="docutils literal">abs_path</span> が <span class="docutils literal">True</span> の場合、プロトコルから始まる完全なURLを返します。</p>
<p><span class="docutils literal">attrs</span> は、&lt;a&gt;要素の属性を辞書で指定します。</p>
<p><span class="docutils literal">values</span> は、グループ別インデックスページの、グループの値を指定します。インデックスページでのみ指定できます。</p>
<p><span class="docutils literal">npage</span> は、インデックスページの、リンク先ページ番号を指定します。インデックスページでのみ指定できます。</p>
<div class="code-block">
<div class="code-block-caption">Sample of content.link_to() method</div>
<div class="highlight"><pre><span></span><span class="cp">{{</span> <span class="nv">content.link_to</span><span class="o">(</span><span class="s2">"../page1.rst"</span><span class="o">,</span> <span class="nv">fragment</span><span class="o">=</span><span class="s2">"id_in_page"</span><span class="o">,</span>
                <span class="nv">attrs</span><span class="o">={</span><span class="s2">"class":"class_a"</span><span class="o">,</span> <span class="s2">"style":"border:solid;"</span><span class="o">})</span> <span class="cp">}}</span><span class="x"></span>
</pre></div>
</div>
</dd>
</dl>
<div class="header_target" id="contents_collection"></div></div>
<div class="section" id="id3">
<h1>コンテンツコレクション</h1>
<p>コンテンツコレクションは、Miyadaikuプロジェクトのすべてのコンテンツを管理するオブジェクトです。</p>
<dl>
<dt>get_content(key, base=None)</dt>
<dd><blockquote>
<p>コレクションから、指定したファイル名の <a href="objects.html#content_obj">コンテントオブジェクト</a> を取得します。</p>
<p><span class="docutils literal">key</span> は、コンテントオブジェクトのパスを、<span class="docutils literal">/</span> で始まる絶対パス、または相対パスで指定します。相対パスで指定する場合は、<span class="docutils literal">base</span> に起点となるコンテントオブジェクトを指定します。</p>
</blockquote>
<div class="code-block">
<div class="code-block-caption">Sample of contents.get_content() method</div>
<div class="highlight"><pre><span></span><span class="x">Link to 'page1.rst' of the parent directory</span>

<span class="cp">{{</span> <span class="nv">contents.link_to</span><span class="o">(</span><span class="s2">"../page1.rst"</span><span class="o">,</span> <span class="nv">base</span><span class="o">=</span><span class="nv">content</span><span class="o">,</span> <span class="nv">fragment</span><span class="o">=</span><span class="s2">"id_in_page"</span><span class="o">,</span>
                <span class="nv">attrs</span><span class="o">={</span><span class="s2">"class":"class_a"</span><span class="o">,</span> <span class="s2">"style":"border:solid;"</span><span class="o">})</span> <span class="cp">}}</span><span class="x"></span>
</pre></div>
</div>
</dd>
<dt>get_contents(subdirs=None, base=None, filters=None)</dt>
<dd><p>コレクションから、指定した条件の <a href="objects.html#content_obj">コンテントオブジェクト</a> を検索します。</p>
<p>特定のディレクトリに含まれるコンテントのみを取得する場合は、<span class="docutils literal">subdirs</span> に、ディレクトリ名のリストを指定します。ディレクトリ名は、<span class="docutils literal">/</span> で始まる絶対パス、または相対パスで指定します。相対パスで指定する場合は、<span class="docutils literal">base</span> に起点となるコンテントオブジェクトを指定します。</p>
<p>結果として、<a href="objects.html#content_obj">コンテントオブジェクト</a> のリストを返します。</p>
<div class="code-block">
<div class="code-block-caption">./myfolder のアーティクルを検索</div>
<div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">set</span> <span class="nv">items</span> <span class="o">=</span> <span class="nv">contents.get_contents</span><span class="o">(</span><span class="nv">subdirs</span><span class="o">=[</span><span class="s1">'./myfolder'</span><span class="o">],</span> <span class="nv">base</span><span class="o">=</span><span class="nv">content</span><span class="o">)</span> <span class="cp">%}</span><span class="x"></span>
</pre></div>
</div>
<p><span class="docutils literal">filtes</span> は、コンテンツの検索条件を指定します。検索する文書プロパティ名をキー、表示対象のプロパティ値のリストを値とする辞書を指定します。</p>
<p>省略時は、文書プロパティ <span class="docutils literal">draft</span> が <span class="docutils literal">false</span> かつ <span class="docutils literal">type</span> が <span class="docutils literal">article</span> のコンテントオブジェクトを検索します。</p>
<div class="code-block">
<div class="code-block-caption">カテゴリが 'news' または 'event' のアーティクルを検索</div>
<div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">set</span> <span class="nv">items</span> <span class="o">=</span> <span class="nv">contents.get_contents</span><span class="o">(</span><span class="nv">filters</span><span class="o">={</span><span class="s1">'type'</span><span class="o">:[</span><span class="s1">'artile'</span><span class="o">],</span> <span class="s1">'category'</span><span class="o">:</span> <span class="o">[</span><span class="s1">'news'</span><span class="o">,</span> <span class="s1">'event'</span><span class="o">]})</span> <span class="cp">%}</span><span class="x"></span>
</pre></div>
</div>
</dd>
<dt>group_items(group, subdirs=None, base=None, filters=None):</dt>
<dd><blockquote>
<p><span class="docutils literal">contents.get_contents()</span> と同様に、アーティクルを検索します。検索結果は、<span class="docutils literal">group</span> で指定するプロパティ名の値で分類します。</p>
<p><span class="docutils literal">subdirs</span>、<span class="docutils literal">base</span>、<span class="docutils literal">filters</span> の使い方は、<span class="docutils literal">contents.get_contents()</span> と同じです。</p>
<p>戻り値は、</p>
<div class="code-block">
<div class="highlight"><pre><span></span><span class="p">[([</span><span class="s1">'プロパティ値1'</span><span class="p">],</span> <span class="p">[</span><span class="n">article1</span><span class="p">,</span> <span class="n">article2</span><span class="p">,]),</span>
 <span class="p">([</span><span class="s1">'プロパティ値2'</span><span class="p">],</span> <span class="p">[</span><span class="n">article3</span><span class="p">,</span> <span class="n">article4</span><span class="p">,</span> <span class="n">article5</span><span class="p">]),]</span>
</pre></div>
</div>
</blockquote>
<p>のように、プロパティ値と該当するコンテントオブジェクトのリストのタプルを要素とするリストを返します。</p>
<blockquote>
<div class="code-block">
<div class="code-block-caption">Group articles in '/dir1' directory with 'tags' property</div>
<div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">set</span> <span class="nv">items</span> <span class="o">=</span> <span class="nv">contents.group_items</span><span class="o">(</span><span class="nv">group</span><span class="o">=</span><span class="s1">'tags'</span><span class="o">,</span> <span class="nv">subdirs</span><span class="o">=[</span><span class="s1">'/dir1'</span><span class="o">])</span> <span class="cp">%}</span><span class="x"></span>
</pre></div>
</div>
</blockquote>
</dd>
</dl>
</div>
      </div>
    </div>
  </div>
</div>

<hr>
<footer>
Copyright &copy; 2017 Atsuo Ishimoto
</footer>


</body>
</html>