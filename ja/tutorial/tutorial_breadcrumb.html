<!DOCTYPE html>
<html lang="ja">
<head>
  
  
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>
  Breadcrumbの実装
</title>
  

  <!-- include boolstrap4 -->
  <link rel="stylesheet" href="../../static/bootstrap4/bootstrap.min.css">

  <!-- include jquery.js -->
  <script src="../../static/jquery/jquery.min.js"></script>

  <!-- include popper.js -->
  <script src="../../static/popper.js/popper.min.js"></script>

  <!-- include boolstrap4 js -->
  <script src="../../static/bootstrap4/bootstrap.min.js"></script>

  <!-- include pygments css -->
  <link rel="stylesheet" href="../../static/pygments/pygments_native.css">
  
  <!-- include font awesome -->
  <link rel="stylesheet" href="../../static/fontawesome/css/font-awesome.min.css">
  
  <meta property="og:url" content="https://miyadaiku.github.io/ja/tutorial/tutorial_breadcrumb.html" />
<meta property="og:locale" content="ja" />
<meta property="og:type" content="article" />

<meta property="og:title" content="Breadcrumbの実装 - Miyadaiku" />

<meta name="description" content="Miyadaikuの コンフィグ を利用して、Breadcrumb付きのサイトを作成します。Breadcrumbは、Bootstrap4 の Breadclumbs で表示します。 このチュートリアルで作成するソースコードは、 https://github.com/miyadaiku/miyadaiku-docs/tree/master/samples/breadcrumb からダウンロードできます。 作成したサイトは、 https://miyadaiku.github.io/samples/breadcrumb/index.html"/>
<meta property="og:description" content="Miyadaikuの コンフィグ を利用して、Breadcrumb付きのサイトを作成します。Breadcrumbは、Bootstrap4 の Breadclumbs で表示します。 このチュートリアルで作成するソースコードは、 https://github.com/miyadaiku/miyadaiku-docs/tree/master/samples/breadcrumb からダウンロードできます。 作成したサイトは、 https://miyadaiku.github.io/samples/breadcrumb/index.html" />



  <link rel="stylesheet" href="../../static/css/miyadaiku-docs.css">


</head>

<body>
  


<nav class="navbar fixed-top navbar navbar-expand-md bg-dark navbar-dark">

<!--<nav class="navbar navbar-toggleable-md navbar-inverse bg-inverse fixed-top">-->
  <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarsExampleDefault" aria-controls="navbarsExampleDefault" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <a class="navbar-brand" href="../index.html">Miyadaiku</a>

  <div class="collapse navbar-collapse" id="navbarsExampleDefault">
    <ul class="navbar-nav mr-auto">

      <li class="nav-item dropdown">
        
        <a class="nav-link dropdown-toggle" data-toggle="dropdown">チュートリアル</a>
        <div class="dropdown-menu">
          

          
            <a class="dropdown-item" href="tutorial.html">サイトの作成</a>
          
            <a class="dropdown-item" href="tutorial_blog.html">Blogサイトの作成</a>
          
            <a class="dropdown-item" href="tutorial_breadcrumb.html">Breadcrumbの実装</a>
          
        </div>
      </li>

      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" data-toggle="dropdown">ガイド</a>
        <div class="dropdown-menu">
          

          
            <a class="dropdown-item" href="../guide/project.html">Miyadaikuプロジェクト</a>
          
            <a class="dropdown-item" href="../guide/property.html">プロパティ</a>
          
            <a class="dropdown-item" href="../guide/article.html">アーティクル</a>
          
            <a class="dropdown-item" href="../guide/snippet.html">スニペット</a>
          
            <a class="dropdown-item" href="../guide/index.html">インデックス</a>
          
            <a class="dropdown-item" href="../guide/config.html">コンフィグ</a>
          
            <a class="dropdown-item" href="../guide/feed.html">フィード</a>
          
            <a class="dropdown-item" href="../guide/template.html">テンプレート</a>
          
            <a class="dropdown-item" href="../guide/objects.html">オブジェクト リファレンス</a>
          
            <a class="dropdown-item" href="../guide/themes.html">テーマ</a>
          
            <a class="dropdown-item" href="../guide/builtin-themes.html">組み込みテーマ</a>
          
            <a class="dropdown-item" href="../guide/commands.html">コマンド</a>
          
        </div>
      </li>

      <li class="nav-item">
        <a class="nav-link" href="../samples.html">サンプル</a>
      </li>

      <li class="nav-item">
        <a class="nav-link" href="https://github.com/miyadaiku/miyadaiku"><i class="fa fa-github" aria-hidden="true"></i> GitHub</a>
      </li>

      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" data-toggle="dropdown">ja</a>
        <div class="dropdown-menu">
          
            
              <a class="dropdown-item" href="../../en/index.html">en</a>
            
          
            
          
        </div>
      </li>


    </ul>
  </div>
</nav>

<div class='container'>
  <div class='row'>
    <div class='col-md-3 toc'>
      
          

          
            
                <div class="article-block">
                  <div class="article-title"><i class="fa fa-file-text-o"></i>            
                  <a href='tutorial.html' >サイトの作成</a></div>
                </div>
            
          
            
                <div class="article-block">
                  <div class="article-title"><i class="fa fa-file-text-o"></i>            
                  <a href='tutorial_blog.html' >Blogサイトの作成</a></div>
                </div>
            
          
            
                <div class="current article-block">
                  <div class="article-title"><i class="fa fa-file-text-o"></i>            
                    <a href='tutorial_breadcrumb.html' >Breadcrumbの実装</a></div>

                  <ul>
                    
                      <li class="header_h1">
                        <a href="#a_%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AE%E4%BD%9C%E6%88%90">プロジェクトの作成</a>
                      </li>
                    
                      <li class="header_h1">
                        <a href="#a_Bootstrap4%E3%83%86%E3%83%BC%E3%83%9E%E3%81%AE%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB">Bootstrap4テーマのインストール</a>
                      </li>
                    
                      <li class="header_h1">
                        <a href="#a_%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E8%A8%AD%E5%AE%9A">プロジェクト設定</a>
                      </li>
                    
                      <li class="header_h1">
                        <a href="#a_%E8%A8%98%E4%BA%8B%E3%81%AE%E4%BD%9C%E6%88%90">記事の作成</a>
                      </li>
                    
                      <li class="header_h1">
                        <a href="#a_%E3%82%B3%E3%83%B3%E3%83%95%E3%82%A3%E3%82%B0%E3%81%AE%E4%BD%9C%E6%88%90">コンフィグの作成</a>
                      </li>
                    
                      <li class="header_h1">
                        <a href="#a_%E3%83%86%E3%83%B3%E3%83%97%E3%83%AC%E3%83%BC%E3%83%88%E3%81%AE%E4%BD%9C%E6%88%90">テンプレートの作成</a>
                      </li>
                    
                      <li class="header_h1">
                        <a href="#a_%E3%82%B5%E3%82%A4%E3%83%88%E3%81%AE%E3%83%93%E3%83%AB%E3%83%89">サイトのビルド</a>
                      </li>
                    
                  </ul>
                </div>
            
          
      
    </div>

    <div class='col-md-9 article-body'>
      <a id='page_title' class='header_target'></a>
      <h1>
        Breadcrumbの実装
      </h1>

      <div class='article-content'>
        <p>Miyadaikuの <a href="../guide/config.html">コンフィグ</a> を利用して、Breadcrumb付きのサイトを作成します。Breadcrumbは、<a class="reference external" href="https://getbootstrap.com/">Bootstrap4</a> の <a class="reference external" href="https://getbootstrap.com/docs/4.3/components/breadcrumb/">Breadclumbs</a> で表示します。</p>
<p>このチュートリアルで作成するソースコードは、</p>
<blockquote>
<p><a class="reference external" href="https://github.com/miyadaiku/miyadaiku-docs/tree/master/samples/breadcrumb">https://github.com/miyadaiku/miyadaiku-docs/tree/master/samples/breadcrumb</a></p>
</blockquote>
<p>からダウンロードできます。</p>
<p>作成したサイトは、</p>
<blockquote>
<p><a class="reference external" href="https://miyadaiku.github.io/samples/breadcrumb/index.html">https://miyadaiku.github.io/samples/breadcrumb/index.html</a></p>
</blockquote>
<p>で参照できます。</p>
<div class="section" id="id1">
<div class="md_header_block" id="h_%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AE%E4%BD%9C%E6%88%90"><a class="md_header_anchor" id="a_%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AE%E4%BD%9C%E6%88%90"></a><h1>プロジェクトの作成</h1></div>
<p>はじめに、次のコマンドで <span class="docutils literal">breadcrumb</span> ディレクトリに <span class="docutils literal">miyadaiku</span> のプロジェクトを作成します</p>
<div class="code-block">
<div class="highlight"><pre><span></span><span class="gp">$</span> miyadaiku-start ./breadcrumb
</pre></div>
</div>
</div>
<div class="section" id="bootstrap4">
<div class="md_header_block" id="h_Bootstrap4%E3%83%86%E3%83%BC%E3%83%9E%E3%81%AE%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB"><a class="md_header_anchor" id="a_Bootstrap4%E3%83%86%E3%83%BC%E3%83%9E%E3%81%AE%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB"></a><h1>Bootstrap4テーマのインストール</h1></div>
<p>Miyadaikuでは、かんたんにBootstrap4を使えるように、<a class="reference external" href="https://github.com/miyadaiku/miyadaiku-themes-bootstrap4">miyadaiku.themes.bootstrap4</a> テーマを用意しています。<span class="docutils literal">miyadaiku.themes.bootstrap4</span> は、次のコマンドでインストールできます。</p>
<div class="code-block">
<div class="highlight"><pre><span></span>$ pip3 install miyadaiku.themes.bootstrap4
</pre></div>
</div>
</div>
<div class="section" id="id2">
<div class="md_header_block" id="h_%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E8%A8%AD%E5%AE%9A"><a class="md_header_anchor" id="a_%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E8%A8%AD%E5%AE%9A"></a><h1>プロジェクト設定</h1></div>
<p>プロジェクト設定ファイル <span class="docutils literal">breadcrumb/config.yml</span> の <span class="docutils literal">themes</span> を修正し、<a class="reference external" href="https://github.com/miyadaiku/miyadaiku-themes-bootstrap4">miyadaiku.themes.bootstrap4</a> を使用するように設定します。</p>
<div class="code-block">
<div class="code-block-caption">first_blog/config.yml:</div>
<div class="highlight"><pre><span></span><span class="c1"># Title of the site</span>
<span class="nt">site_title</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">FIXME - site title</span>

<span class="c1"># Default language code</span>
<span class="nt">lang</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ja</span>

<span class="l l-Scalar l-Scalar-Plain">(... 中略 ...)</span>

<span class="c1"># List of site theme</span>
<span class="nt">themes</span><span class="p">:</span>                            <span class="c1"># &lt;--- この行を修正</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">miyadaiku.themes.bootstrap4</span>    <span class="c1"># &lt;--- この行を修正</span>
</pre></div>
</div>
</div>
<div class="section" id="id3">
<div class="md_header_block" id="h_%E8%A8%98%E4%BA%8B%E3%81%AE%E4%BD%9C%E6%88%90"><a class="md_header_anchor" id="a_%E8%A8%98%E4%BA%8B%E3%81%AE%E4%BD%9C%E6%88%90"></a><h1>記事の作成</h1></div>
<p>表示する記事として、<span class="docutils literal">breadcrumb/contents</span> ディレクトリと <span class="docutils literal">breadcrumb/contents/child1</span> ディレクトリに、次の4ファイルを作成します。</p>
<div class="code-block">
<div class="code-block-caption">breadcrumb/contents/index.rst:</div>
<div class="highlight"><pre><span></span><span class="p">..</span> <span class="ow">article</span><span class="p">::</span>
   <span class="nc">:title:</span> <span class="nf">index.rst in the root directory</span>

This is /index.rst.
</pre></div>
</div>
<div class="code-block">
<div class="code-block-caption">breadcrumb/contents/page1.rst:</div>
<div class="highlight"><pre><span></span><span class="p">..</span> <span class="ow">article</span><span class="p">::</span>
   <span class="nc">:title:</span> <span class="nf">page1.rst in the root directory</span>

This is /page1.rst.
</pre></div>
</div>
<div class="code-block">
<div class="code-block-caption">breadcrumb/contents/child1/index.rst:</div>
<div class="highlight"><pre><span></span><span class="p">..</span> <span class="ow">article</span><span class="p">::</span>
   <span class="nc">:title:</span> <span class="nf">index.rst in the child1 directory</span>

Welcome to the child1.
</pre></div>
</div>
<div class="code-block">
<div class="code-block-caption">breadcrumb/contents/child1/child1-2.rst:</div>
<div class="highlight"><pre><span></span><span class="p">..</span> <span class="ow">article</span><span class="p">::</span>
   <span class="nc">:title:</span> <span class="nf">child1-2.rst in the child1 directory</span>

This is child1-2.rst file in the /child1 directory.
</pre></div>
</div>
</div>
<div class="section" id="id4">
<div class="md_header_block" id="h_%E3%82%B3%E3%83%B3%E3%83%95%E3%82%A3%E3%82%B0%E3%81%AE%E4%BD%9C%E6%88%90"><a class="md_header_anchor" id="a_%E3%82%B3%E3%83%B3%E3%83%95%E3%82%A3%E3%82%B0%E3%81%AE%E4%BD%9C%E6%88%90"></a><h1>コンフィグの作成</h1></div>
<p><a href="../guide/config.html">コンフィグ</a> は、ディレクトリごとの設定を指定するYAMLファイルです。</p>
<p><span class="docutils literal">breadcrumb/contents</span> ディレクトリと <span class="docutils literal">breadcrumb/contents/child1</span> ディレクトリにコンフィグを作成し、Breadcrumb に表示するタイトルを <span class="docutils literal">foldername</span> 属性に指定します。</p>
<div class="code-block">
<div class="code-block-caption">breadcrumb/contents/root.yml:</div>
<div class="highlight"><pre><span></span><span class="nt">foldername</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Root folder</span>
</pre></div>
</div>
<div class="code-block">
<div class="code-block-caption">breadcrumb/contents/child1/child1.yml:</div>
<div class="highlight"><pre><span></span><span class="nt">foldername</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Child1 folder</span>
</pre></div>
</div>
</div>
<div class="section" id="id5">
<div class="md_header_block" id="h_%E3%83%86%E3%83%B3%E3%83%97%E3%83%AC%E3%83%BC%E3%83%88%E3%81%AE%E4%BD%9C%E6%88%90"><a class="md_header_anchor" id="a_%E3%83%86%E3%83%B3%E3%83%97%E3%83%AC%E3%83%BC%E3%83%88%E3%81%AE%E4%BD%9C%E6%88%90"></a><h1>テンプレートの作成</h1></div>
<p>Jinja2テンプレート <span class="docutils literal">breadcrumb/templates/page_article.html</span> を作成します。</p>
<div class="code-block">
<div class="code-block-caption">breadcrumb/templates/page_article.html:</div>
<div class="highlight"><pre><span></span><span class="x">&lt;!DOCTYPE html&gt;</span>
<span class="x">&lt;html&gt;</span>
<span class="x">&lt;head&gt;</span>
<span class="x">  &lt;!-- include boolstrap4 --&gt;</span>
<span class="x">  </span><span class="cp">{{</span> <span class="nv">bootstrap4.load_css</span><span class="o">(</span><span class="nv">page</span><span class="o">)</span> <span class="cp">}}</span><span class="x"></span>

<span class="x">  &lt;title&gt;</span><span class="cp">{{</span> <span class="nv">page.title</span> <span class="cp">}}</span><span class="x"> - </span><span class="cp">{{</span> <span class="nv">page.site_title</span> <span class="cp">}}</span><span class="x">&lt;/title&gt;</span>
<span class="x">&lt;/head&gt;</span>

<span class="x">&lt;body&gt;</span>


<span class="x">&lt;nav aria-label="breadcrumb"&gt;</span>
<span class="x">  &lt;ol class="breadcrumb"&gt;</span>

<span class="x">    </span><span class="cp">{%</span> <span class="k">for</span> <span class="nv">parent</span> <span class="k">in</span> <span class="nv">page.parents_dirs</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">      &lt;li class="breadcrumb-item"&gt;</span>
<span class="x">        </span><span class="cp">{{</span> <span class="nv">page.link_to</span><span class="o">((</span><span class="nv">parent</span><span class="o">,</span> <span class="s1">'index.rst'</span><span class="o">),</span>
                         <span class="nv">text</span><span class="o">=</span><span class="nv">config.get</span><span class="o">(</span><span class="nv">parent</span><span class="o">,</span> <span class="s1">'foldername'</span><span class="o">))</span> <span class="cp">}}</span><span class="x"></span>
<span class="x">      &lt;/a&gt;&lt;/li&gt;</span>
<span class="x">    </span><span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span><span class="x"></span>

<span class="x">    &lt;li class="breadcrumb-item active"&gt;</span>
<span class="x">      </span><span class="cp">{{</span> <span class="nv">page.title</span> <span class="cp">}}</span><span class="x"></span>
<span class="x">    &lt;/li&gt;</span>
<span class="x">  &lt;/ol&gt;</span>
<span class="x">&lt;/nav&gt;</span>


<span class="x"> &lt;div class="container-fluid"&gt;</span>
<span class="x"> &lt;div class="row"&gt;</span>
<span class="x">    &lt;div class="col-sm"&gt;</span>
<span class="x">      </span><span class="cp">{{</span> <span class="nv">page.html</span> <span class="cp">}}</span><span class="x"></span>
<span class="x">    &lt;/div&gt;</span>
<span class="x">    &lt;div class="col-sm"&gt;</span>
<span class="x">      &lt;ul&gt;</span>
<span class="x">        </span><span class="cp">{%</span> <span class="k">for</span> <span class="nv">article</span> <span class="k">in</span> <span class="nv">contents.get_contents</span><span class="o">(</span><span class="nv">subdirs</span><span class="o">=[</span><span class="nv">page.dirname</span><span class="o">])</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">          &lt;li&gt;</span><span class="cp">{{</span> <span class="nv">article.link</span><span class="o">(</span><span class="nv">text</span><span class="o">=</span><span class="s2">"%s (/%s)"</span> <span class="err">%</span> <span class="o">(</span>
                 <span class="nv">article.title</span><span class="o">,</span>
                 <span class="s2">"/"</span><span class="nv">.join</span><span class="o">(</span><span class="nv">article.dirname</span><span class="o">+(</span><span class="nv">article.name</span><span class="o">,))))</span> <span class="cp">}}</span><span class="x"></span>
<span class="x">        </span><span class="cp">{%</span><span class="k">endfor</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">      &lt;/ul&gt;</span>
<span class="x">    &lt;/div&gt;</span>
<span class="x">  &lt;/div&gt;</span>
<span class="x">&lt;/div&gt;</span>

<span class="x">&lt;/body&gt;</span>
<span class="x">&lt;/html&gt;</span>
</pre></div>
</div>
<p>次のように <span class="docutils literal">bootstrap4.load_css()</span> を呼び出し、Bootstrap4のCSSをロードする <span class="docutils literal">&lt;link&gt;</span> 要素を出力します。</p>
<div class="code-block">
<div class="highlight"><pre><span></span><span class="x">&lt;head&gt;</span>
<span class="x">  &lt;!-- include boolstrap4 --&gt;</span>
<span class="x">  </span><span class="cp">{{</span> <span class="nv">bootstrap4.load_css</span><span class="o">(</span><span class="nv">page</span><span class="o">)</span> <span class="cp">}}</span><span class="x"></span>
</pre></div>
</div>
<p>ページオブジェクトの <span class="docutils literal">parents_dirs</span> 属性で親ディレクトリの一覧を取得し、各ディレクトリの <span class="docutils literal">index.rst</span> へのリンクをBreadcrumbとして出力します。</p>
<div class="code-block">
<div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">for</span> <span class="nv">parent</span> <span class="k">in</span> <span class="nv">page.parents_dirs</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">  &lt;li class="breadcrumb-item"&gt;</span>
<span class="x">    </span><span class="cp">{{</span> <span class="nv">page.link_to</span><span class="o">((</span><span class="nv">parent</span><span class="o">,</span> <span class="s1">'index.rst'</span><span class="o">),</span>
                     <span class="nv">text</span><span class="o">=</span><span class="nv">config.get</span><span class="o">(</span><span class="nv">parent</span><span class="o">,</span> <span class="s1">'foldername'</span><span class="o">))</span> <span class="cp">}}</span><span class="x"></span>
<span class="x">  &lt;/a&gt;&lt;/li&gt;</span>
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span><span class="x"></span>
</pre></div>
</div>
<p>一番最後のBreadcrumbは、現在のページのタイトルを出力します。</p>
<div class="code-block">
<div class="highlight"><pre><span></span><span class="x">&lt;li class="breadcrumb-item active"&gt;</span>
<span class="x">  </span><span class="cp">{{</span> <span class="nv">page.title</span> <span class="cp">}}</span><span class="x"></span>
<span class="x">&lt;/li&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="id6">
<div class="md_header_block" id="h_%E3%82%B5%E3%82%A4%E3%83%88%E3%81%AE%E3%83%93%E3%83%AB%E3%83%89"><a class="md_header_anchor" id="a_%E3%82%B5%E3%82%A4%E3%83%88%E3%81%AE%E3%83%93%E3%83%AB%E3%83%89"></a><h1>サイトのビルド</h1></div>
<p>次のコマンドでサイトをビルドします。</p>
<div class="code-block">
<div class="highlight"><pre><span></span><span class="gp">$</span> miyadaiku-build ./breadcrumb
</pre></div>
</div>
<p>正常に終了すると、<span class="docutils literal">breadcrumb/outputs/index.html</span> が出力されます。</p>
</div>
      </div>
    </div>
  </div>
</div>

<hr>
<footer>
Copyright &copy; 2017 Atsuo Ishimoto
</footer>


</body>
</html>